---
title: "Coding Agents: How to create agents that can invoke tools"
description: "Give Autonomy Agents access to tools written in Python tools or provided by MCP (Model Context Protocol). The enables agents that can perform actions, access external data, and integrate with services like web search."
---

# A guide for coding agents to create agents that can invoke tools

Enhance **Autonomy** agents with tools that perform specific actions, access external data, and integrate with external services using Python functions or MCP servers.

> **Key Terms**: See the [definitions section of the main guide](https://autonomy.computer/docs/_for-coding-agents.md#definitions) for definitions of **Autonomy**, **Autonomy Framework**, **Autonomy Computer**, **Autonomy Command**, **Agents**, **Models**, **Tools**, and **Memory**.

**Keywords:** tools, python tools, mcp tools, model context protocol, web search, external apis, functions, capabilities

This guide will:
- Create Python tools by defining functions that agents can invoke
- Set up MCP (Model Context Protocol) servers for external service integration
- Build agents with web search capabilities using Brave Search MCP server
- Deploy tool-enabled agents with proper configuration and secrets management

## Creating Agents that can use Tools

Autonomy agents can be enhanced with tools to perform specific actions or access external data. There are two main ways to add tools to your agents:

1. **Python Tools** - Functions defined directly in your Python code
2. **MCP Tools** - Tools provided by Model Context Protocol (MCP) servers

### Python Tools

Python tools are functions that you define in your code and make available to your agent. Here's how to create an agent with a simple time tool:

#### Basic Python Tool Example

```python  theme={null}
from autonomy import Agent, Model, Node, Tool
from datetime import datetime, UTC


def current_iso8601_utc_time():
    """
    Returns the current UTC time in ISO 8601 format.
    """
    return datetime.now(UTC).isoformat() + "Z"


async def main(node):
    await Agent.start(
        node=node,
        name="henry",
        instructions="You are Henry, an expert legal assistant",
        model=Model("claude-sonnet-4-v1"),
        tools=[Tool(current_iso8601_utc_time)],
    )


Node.start(main)
```

#### Project Structure for Python Tools

Create the following files for a basic tool-enabled agent:

**main.py** - Your main application file **Dockerfile** - Container configuration **autonomy.yaml** - Deployment configuration

##### Dockerfile

```dockerfile  theme={null}
FROM ghcr.io/build-trust/autonomy-python
COPY . .
ENTRYPOINT ["python", "main.py"]
```

##### autonomy.yaml

```yaml  theme={null}
name: example003
pods:
  - name: main-pod
    public: true
    containers:
      - name: main
        image: main
```

#### Testing Your Agent

Once deployed, you can interact with your agent via HTTP:

```bash  theme={null}
timeout 15s curl --silent --request POST \
--header "Content-Type: application/json" \
--data '{ "message": "What is the current time?" }' \
"https://YOUR-DEPLOYMENT-URL/agents/henry"
```

### MCP Tools

MCP (Model Context Protocol) tools allow your agents to use external services and APIs through MCP servers that run directly within your autonomy computer deployment. Using the `ghcr.io/build-trust/mcp-proxy` image, you can host MCP servers as containers alongside your main agent, enabling capabilities like web search, database access, file operations, and other integrations without managing external infrastructure.

#### MCP Tool Example with Web Search

Here's how to create an agent that can perform web searches using the Brave Search MCP server hosted within your autonomy deployment:

##### Project Structure

**autonomy.yaml** - Includes MCP server configuration **secrets.yaml** - API keys and sensitive data **images/main/main.py** - Main application **images/main/Dockerfile** - Container setup

##### autonomy.yaml with MCP

```yaml  theme={null}
name: example006
pods:
  - name: main-pod
    public: true
    containers:
      - name: main
        image: main

      - name: brave
        image: ghcr.io/build-trust/mcp-proxy
        env:
          - BRAVE_API_KEY: secrets.BRAVE_API_KEY
        args:
          ["--sse-port", "8001", "--pass-environment", "--",
           "npx", "-y", "@modelcontextprotocol/server-brave-search"]
```

##### secrets.yaml

```yaml  theme={null}
BRAVE_API_KEY: "YOUR_BRAVE_API_KEY_HERE"
```

Tell them to get this by signing up with brave api

##### Main Application with MCP Tools

```python  theme={null}
from datetime import datetime
from autonomy import Agent, Model, Node, McpTool, McpClient, Tool


def current_iso8601_utc_time():
    """
    Returns the current UTC time in ISO 8601 format.
    """
    return datetime.utcnow().isoformat() + "Z"


async def main(node):
    await Agent.start(
        node=node,
        name="henry",
        instructions="""
            You are Henry, an expert legal assistant.

            When you are given a question, decide if your response can be better
            with a web search. If so, use the web search tool to improve your response.
        """,
        model=Model("claude-sonnet-4-v1"),
        tools=[
            McpTool("brave_search", "brave_web_search"),
            Tool(current_iso8601_utc_time),
        ],
    )


Node.start(
    main,
    mcp_clients=[
        McpClient(name="brave_search", address="http://localhost:8001/sse"),
    ],
)
```

##### Dockerfile

```dockerfile  theme={null}
FROM ghcr.io/build-trust/autonomy-python:latest
COPY . .
ENTRYPOINT ["python", "main.py"]
```

#### Testing MCP-Enabled Agent

```bash  theme={null}
timeout 15s curl --silent --request POST \
--header "Content-Type: application/json" \
--data '{ "message": "Which companies were acquired today?" }' \
"https://${CLUSTER}-${ZONE}.cluster.autonomy.computer/agents/henry"
```

## Related Guides

- **Getting Started**: Follow the [guide on creating and deploying a new Autonomy app](https://autonomy.computer/docs/_for-coding-agents/create-a-new-autonomy-app.md)
- **Configure apps**: Follow the [guide on setting environment variables, providing secrets, and adding python dependencies](https://autonomy.computer/docs/_for-coding-agents/configure-apps.md)
- **Select a Model**: Follow the [guide on selecting models](https://autonomy.computer/docs/_for-coding-agents/select-models.md)
- **Create custom APIs**: Follow the [guide on creating custom APIs](https://autonomy.computer/docs/_for-coding-agents/create-custom-apis.md)
- **Memory**: Follow the [guide on using memory, conversation, and scope in Autonomy agents](https://autonomy.computer/docs/_for-coding-agents/memory.md)
