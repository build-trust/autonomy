
```
  ┌─────────┐
  │         │
  │  INIT   │
  │         │
  └────┬────┘
       │
       ├─────────────────────────┐
       │                         │
       │ [planner available]     │ [planner not available]
       ▼                         ▼
  ┌─────────┐               ┌──────────┐
  │         │               │          │
  │PLANNING │◀──[next step]─┤ MODEL    │◀─────┐
  │         ├──[execute]───▶│ CALLING  │      │
  └────┬────┘               └┬────┬────┘      │
       │                     │    │           │
       │                     │    │           │
       │                     │    │           │
       │                     │    │           │
       │                     │    │           │
       │                     │    ▼           │
       │                     │┌────────┐      │
       │                     ││        │      │
       │                     ││  TOOL  │──────┘
       │ [plan completed]    ││CALLING │
       │                     │└────────┘
       │                     │
       ▼                     │
  ┌─────────┐                │
  │         │                │
  │FINISHED │◀───────────────┘
  │         │
  └─────────┘
```
